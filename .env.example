# Obzorarr Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# Server Configuration
# =============================================================================

# Application origin URL (required for CSRF protection and OAuth callbacks)
# For local development: http://localhost:3000
# For production behind reverse proxy: https://obzorarr.yourdomain.com
ORIGIN=http://localhost:3000

# Server port (default: 3000)
PORT=3000

# Server host (default: 0.0.0.0 for Docker, 127.0.0.1 for local dev)
HOST=0.0.0.0

# =============================================================================
# Plex Media Server Configuration
# =============================================================================
# These values can also be configured via the Admin Settings page.
# Admin Settings take priority over environment variables.

# URL of your Plex Media Server
# Example: http://localhost:32400 or http://192.168.1.100:32400
PLEX_SERVER_URL=http://localhost:32400

# Plex authentication token
# Find your token: https://support.plex.tv/articles/204059436-finding-an-authentication-token-x-plex-token/
PLEX_TOKEN=your-plex-token-here

# =============================================================================
# Database Configuration
# =============================================================================

# Path to SQLite database file
# For Docker: /app/data/obzorarr.db (mounted volume)
# For local development: data/obzorarr.db
DATABASE_PATH=data/obzorarr.db

# =============================================================================
# Sync Configuration
# =============================================================================

# Cron schedule for automatic sync (default: every 6 hours)
# Format: minute hour day month weekday
SYNC_CRON_SCHEDULE=0 */6 * * *

# Number of concurrent metadata enrichment requests (1-20, default: 5)
# Higher values speed up enrichment but may trigger Plex rate limiting
# METADATA_CONCURRENCY=5

# =============================================================================
# Optional: AI Fun Facts Configuration
# =============================================================================
# These values can also be configured via the Admin Settings page.
# Admin Settings take priority over environment variables.

# OpenAI-compatible API endpoint (optional)
# Leave empty to use predefined fun fact templates
# Default: https://api.openai.com/v1
OPENAI_API_URL=

# OpenAI API key (optional)
# Required for AI-generated fun facts
OPENAI_API_KEY=

# OpenAI model to use for fun facts generation
# Default: gpt-4o-mini
OPENAI_MODEL=gpt-4o-mini

# =============================================================================
# Development Configuration
# =============================================================================

# Enable development authentication bypass (DEVELOPMENT ONLY)
# When set to 'true' in dev mode (bun run dev), automatically bypasses
# Plex OAuth and authenticates as a user from your Plex server.
#
# By default (when DEV_BYPASS_USER is not set), authenticates as the
# actual server owner/admin with their real Plex user data.
#
# Uses PLEX_TOKEN from environment for Plex API calls.
#
# SECURITY WARNING: This setting is ignored in production builds.
# Never use this in a production environment.
#
# DEV_BYPASS_AUTH=true

# Select which user to simulate in dev-bypass mode (DEVELOPMENT ONLY)
# Only used when DEV_BYPASS_AUTH=true
#
# Options:
#   - Not set or empty: Uses the actual server owner/admin from Plex
#   - "random": Randomly selects a non-admin user from the server (cached per session)
#   - <plexId>: Authenticate as a specific user by their Plex ID (e.g., "12345678")
#   - <username>: Authenticate as a specific user by their username (e.g., "john_doe")
#
# If the specified user is not found, falls back to the server owner.
# If Plex API is unavailable, falls back to a mock admin user.
#
# Examples:
#   DEV_BYPASS_USER=random           # Random non-admin user each dev session
#   DEV_BYPASS_USER=12345678         # Specific user by Plex ID
#   DEV_BYPASS_USER=john_doe         # Specific user by username
#
# DEV_BYPASS_USER=
